{"version":3,"sources":["utils/axios.js","api/index.js","utils/storeUtils.js","pages/login/login.js","utils/common.js","components/header/index.js","config/menuConfig.js","components/left-nav/index.js","pages/home/home.js","pages/category/category.js","pages/role/role.js","pages/user/user.js","pages/product/product.js","pages/charts/line.js","pages/charts/pie.js","pages/charts/bar.js","pages/admin/admin.js","App.js","index.js"],"names":["axios","require","url","type","data","Promise","resolve","reject","get","post","then","res","catch","err","message","error","reqLogin","request","reqWeather","city","jsonp","status","results","weather_data","getData","user","set","key","value","store","remove","Login","handleSubmit","e","preventDefault","props","form","validateFields","values","a","Object","assign","username","btoa","password","history","replace","msg","this","validatorPwd","rule","callback","length","to","getFieldDecorator","className","onSubmit","Item","rules","required","min","max","pattern","initialValue","prefix","style","color","placeholder","validator","htmlType","onClick","Component","WrappeLoginForm","create","name","moment","locale","getCurrentDate","date","format","HeaderSelf","state","weather","Date","weatherText","address","exitConfirm","confirm","title","content","okText","cancelText","confirmLoading","onOk","exitTimerID","setTimeout","console","log","dayPictureUrl","setState","imgSrc","address_detail","getWeather","getAddress","timerID","setInterval","clock","clearInterval","href","rel","target","src","alt","withRouter","menuList","icon","isPublic","children","SubMenu","LeftNav","toggleCollapsed","collapsed","menuNav_map","menuConfig","map","item","menuNav_reduce","arr","reduce","pre","push","getCurrentReqParentPath","menuLists","location","pathname","getCurrentReqPath","forEach","element","cItem","mode","theme","selectedKeys","defaultOpenKeys","Footer","Sider","Content","Admin","onCollapse","minHeight","collapsible","margin","background","path","component","Home","Category","Product","Role","User","Bar","Line","Pie","textAlign","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c062781e.chunk.js","sourcesContent":["/**\n * @description 封装axios\n */\nimport {message} from 'antd'\n// import config from '../config'\nconst axios = require('axios')\n\nexport default function (url, type = 'GET', data) {\n  let promise;\n  // url=config.serverAddress+url\n  // 返回一个promise，统一处理错误\n  return new Promise((resolve, reject) => {\n    // 1.执行异步请求\n    if (type === 'GET') {\n      promise = axios.get(url)\n    } else {\n      promise = axios.post(url, data)\n    }\n    promise.then(res => {\n      // 2.成功调用resolve\n      resolve(res.data)\n    }).catch(err => {\n      // 3.失败调用reject，但是不能调用，调用就进入外层catch里了，为了不在外层用try...catch这里显式的返回error\n      message.error('请求出错'+err.message)\n    })\n  })\n}","/**\n * @param 应用接口\n */\nimport request from '../utils/axios'\nimport jsonp from 'jsonp'\n// import md5 from 'md5'\nimport {\n  message\n} from 'antd'\nexport const reqLogin = data => request('/login', 'POST', data)\nexport const reqAddUser = data => request('/manage/user/add', 'POST', data)\n\nexport const reqWeather = (city) => {\n  return new Promise((resolve, reject) => {\n    const getData = (city='深圳') => {\n      const url = `https://api.map.baidu.com/telematics/v3/weather?location=${city}&output=json&ak=3p49MVra6urFRGOT9s8UBWr2`\n      jsonp(url, {}, (err, data) => {\n        if (data && data.status === 'success') {\n          resolve(data.results[0].weather_data[0])\n        } else {\n          message.error(data.status)\n        }\n      })\n    }\n    getData(city)\n    // if (\"geolocation\" in navigator) {\n    //   getData()\n    //   navigator.geolocation.getCurrentPosition(function (position) {\n    //     console.log(position)\n    //     const city = `${position.coords.longitude},${position.coords.latitude}`\n    //     getData(city)\n    //   })\n    // } else {\n    //   getData()\n    // }\n  })\n}\n\nexport const reqAddress=()=>{\n    return new Promise((resolve,reject)=>{\n      jsonp('https://api.map.baidu.com/location/ip?ak=PFlNd9vKhGalbukR6ZIlFKzKvFsutPWV',{},(err,data)=>{\n        if(data&&data.status===0){\n          resolve(data.content)\n        }else{\n          reject(data.status)\n        }\n      })\n    })\n}","/**\n * @description localStore\n */\nimport store from 'store'\nexport default {\n  user:null,\n  set(key, value){\n    // localStorage.setItem(key, JSON.stringify(value))\n    store.set(key,value)\n  },\n  get(key) {\n    // return JSON.parse(localStorage.getItem(key) || '{}')\n    return store.get(key)\n  },\n  remove(key){\n    // localStorage.removeItem(key)\n    store.remove(key)\n  }\n}","import React, { Component } from 'react';\nimport { Form, Icon, Input, Button,message} from 'antd';\nimport {Redirect} from 'react-router-dom'\nimport {reqLogin} from '../../api'\nimport store from '../../utils/storeUtils'\nimport './login.less'\nclass Login extends Component {\n  handleSubmit = e => {\n    e.preventDefault();\n    this.props.form.validateFields(\n      async (err, values) => { //可以对所有结果校验，并返回结果\n        if (!err) {\n          values=Object.assign(values,{username:btoa(values.username),password:btoa(values.password)})\n          const res = await reqLogin(values)\n          if (res.status === 0) {\n            // message.success('登录成功！')\n            store.set('user_key', res.data) //全局存储\n            store.user=res.data\n            this.props.history.replace('/') // 登录成功，跳转页面,不需要回退，所以用replace不用push\n          } else {\n            message.error(res.msg)\n          }\n        }\n      });\n  };\n  // 自定义密码验证规则\n  validatorPwd=(rule, value, callback)=>{\n    // 无论验证成功与否callback()必须调用\n    if(!value){\n      callback('请输入密码！')\n    }else if(value.length<4||value.length>12){\n      callback('密码长度应大于4小于12位！') //验证不通过传入错误提示\n    }\n    callback()//验证成功无提示\n  }\n  render() {\n    // 如果检测到登录信息自动登录\n    if(store.user){\n      return <Redirect to='/'/>\n    }\n    const { getFieldDecorator } = this.props.form;\n    return (\n      <div className='login'>\n        <div className='header'>\n        </div>\n        <div className='content'>\n          <section className='login-form'>\n          <div className='login-label'> <span >管理平台</span></div>\n          <Form onSubmit={this.handleSubmit} className=\"\">\n          <Form.Item>\n          {getFieldDecorator('username', {\n            rules: [\n              { required: true,message: '请输入用户名！',min:4},\n              { message: '用户名长度应大于4小于12位！',min:4,max:12},\n              { message: '用户名只能含有数字、英文、下划线!',pattern:/^[a-zA-Z0-9_]+$/ },//+号可以匹配任意多个字符\n            ],\n            initialValue: 'admin', // 初始值\n          })(\n            <Input\n              prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n              placeholder=\"用户名\"\n            />,\n          )}\n          </Form.Item>\n          <Form.Item>\n          {getFieldDecorator('password', {\n            rules: [\n              { validator:this.validatorPwd},//自定义校验规则\n            ],\n            initialValue: 'admin', // 初始值\n          })(\n            <Input\n              prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n              type=\"password\"\n              placeholder=\"密码\"\n            />,\n          )}\n          </Form.Item>\n          <Form.Item>\n          <Button type=\"primary\" htmlType=\"submit\" className='login-btn' onClick={this.onSubmit}>\n            登录\n          </Button>\n          </Form.Item>\n        </Form>\n          </section>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst WrappeLoginForm = Form.create({ name: 'normal_login' })(Login);\nexport default WrappeLoginForm\n","import moment from 'moment'\nmoment.locale('zh-cn'); \nexport const getCurrentDate=(date)=>{\n return moment(date).format('HH:mm:ss a')\n}","import React, { Component } from 'react';\nimport {Modal} from 'antd'\nimport {withRouter} from 'react-router-dom'\nimport store from '../../utils/storeUtils'\nimport {reqWeather,reqAddress} from '../../api'\nimport {getCurrentDate} from '../../utils/common'\nimport './index.less'\n\nclass HeaderSelf extends Component {\n  state = { \n    weather:'',\n    date:getCurrentDate(new Date()),\n    weatherText:'',\n    address:''\n   }\n  exitConfirm=(e)=>{\n    e.preventDefault();\n    Modal.confirm({\n      title:'退出',\n      content: '确定退出？',\n      okText:'退出',\n      cancelText:'取消',\n      confirmLoading:true,\n      onOk:()=> {\n        return new Promise((resolve, reject) => {\n          this.exitTimerID=setTimeout(()=>{\n            store.remove('user_key')\n            store.user=null\n            resolve(null)\n            this.props.history.replace('/')\n          },500);\n        }).catch(() => console.log('Oops errors!'));\n      },\n    })\n  }\n  async getWeather(city){\n    const {date,dayPictureUrl,weather} = await reqWeather(city)\n    this.setState({\n      weather:date,\n      imgSrc:dayPictureUrl,\n      weatherText:weather\n    })\n  }\n  async getAddress(){\n    const {address,address_detail}= await reqAddress()\n    const {city}=address_detail\n    this.getWeather(city)\n    this.setState({\n      address\n    })\n  }\n  componentDidMount(){\n    this.getAddress()\n    this.timerID = setInterval(()=>{\n      this.clock()\n    },1000)\n  }\n  componentWillUnmount() {\n    clearInterval(this.timerID);\n    clearInterval(this.exitTimerID);\n  }\n  clock(){\n    this.setState({\n      date:getCurrentDate(new Date())\n    })\n  }\n  render() {\n    const username=store.user.username\n    \n    return (\n      <div className='header'>\n        <div className='header-top'>\n          <span>欢迎您，{username}</span>\n          <a href='#' onClick={this.exitConfirm} className='header-exit-btn'>退出</a>\n        </div>\n        <div className='header-buttom'>\n          <span className='getSource'><a rel=\"noopener noreferrer\"  href='https://github.com/Composur/react-manage' target='_blank'>获取前端+后台源码</a></span>\n          <span>{this.state.address}</span>\n          <span>{this.state.weather}</span>\n          <span>{this.state.date}</span>\n          <span>{this.state.weatherText}</span>\n          <span className='header-buttom-weather-img'><img src={this.state.imgSrc} alt=''></img></span>\n        </div>\n      </div>\n    );\n  }\n}\nexport default withRouter(HeaderSelf)","const menuList = [\n  {\n    title: '首页', // 菜单标题名称\n    key: '/home', // 对应的path\n    icon: 'home', // 图标名称\n    isPublic: true, // 公开的\n  },\n  {\n    title: '商品',\n    key: '/products',\n    icon: 'appstore',\n    children: [ // 子菜单列表\n      {\n        title: '品类管理',\n        key: '/category',\n        icon: 'bars'\n      },\n      {\n        title: '商品管理',\n        key: '/product',\n        icon: 'tool'\n      },\n    ]\n  },\n\n  {\n    title: '用户管理',\n    key: '/user',\n    icon: 'user'\n  },\n  {\n    title: '角色管理',\n    key: '/role',\n    icon: 'safety',\n  },\n\n  {\n    title: '图形图表',\n    key: '/charts',\n    icon: 'area-chart',\n    children: [\n      {\n        title: '柱形图',\n        key: '/charts/bar',\n        icon: 'bar-chart'\n      },\n      {\n        title: '折线图',\n        key: '/charts/line',\n        icon: 'line-chart'\n      },\n      {\n        title: '饼图',\n        key: '/charts/pie',\n        icon: 'pie-chart'\n      },\n    ]\n  },\n\n  {\n    title: '订单管理',\n    key: '/order',\n    icon: 'windows',\n  },\n]\n\nexport default menuList","import React, { Component } from 'react'\nimport { Menu, Icon } from 'antd';\nimport {Link,withRouter} from 'react-router-dom'\nimport menuLists from '../../config/menuConfig'\nimport './index.less'\n\nconst { SubMenu } = Menu;\nclass LeftNav extends Component {  \n  constructor(props){\n    super(props)\n    this.state = {\n      collapsed: false,\n    };\n    this.getCurrentReqParentPath(menuLists,this.props.location.pathname )\n  }\n  getCurrentReqParentPath(arr,getCurrentReqPath){\n    arr.forEach(element => {\n      if(element.children){\n        element.children.forEach((cItem)=>{\n          if(getCurrentReqPath===cItem.key){\n            // 得到需要展开的key\n            this.getCurrentReqParentPath=element.key\n          }\n        })\n      }\n    });\n  }\n  toggleCollapsed = () => {\n    this.setState({\n      collapsed: !this.state.collapsed,\n    });\n  };\n  // 根据导航json格式进行递归渲染\n  // 方式一：map\n  menuNav_map = (menuConfig) => {\n    return menuConfig.map(item => {\n      if(item.children){\n        return (\n          <SubMenu  key={item.key}   title={\n            <span>\n              <Icon type={item.icon} />\n              <span>{item.title}</span>\n            </span>\n          }\n        >\n        { this.menuNav_map(item.children)  }\n        </SubMenu>\n        )\n      }else{\n        return (\n          <Menu.Item key={item.key}>\n          <Link to={item.key}>\n            <Icon type={item.icon} />\n            <span>{item.title}</span>\n          </Link>\n        </Menu.Item>\n        )\n      }\n    })\n  }\n  // 方式二：reduce\n  menuNav_reduce=(arr)=>{\n    return arr.reduce((pre,item)=>{\n      if(item.children){\n        pre.push(\n          <SubMenu  key={item.key}   title={\n            <span>\n              <Icon type={item.icon} />\n              <span>{item.title}</span>\n            </span>\n          }\n        >\n        { this.menuNav_reduce(item.children)  }\n        </SubMenu>\n        )\n      }else{\n        pre.push(\n          <Menu.Item key={item.key}>\n          <Link to={item.key}>\n            <Icon type={item.icon} />\n            <span>{item.title}</span>\n          </Link>\n        </Menu.Item>\n        )\n      }  \n      return pre    \n    },[])\n  }\n \n  render() {\n    //这样是获取不到的，因为不是路由组件没有经过router的包装\n    const getCurrentReqPath=this.props.location.pathname \n    const getCurrentReqParentPath=this.getCurrentReqParentPath\n    return (\n      <div className='left-nav' >\n\n        <Link to='/'>\n          <header className='left-nav-header'>\n          <h1 className='left-nav-header-content'>管理系统</h1>\n          </header>\n        </Link>\n        \n        <Menu mode=\"inline\" theme=\"dark\" selectedKeys={[getCurrentReqPath]}\n         defaultOpenKeys={[getCurrentReqParentPath]}\n         >\n          {this.menuNav_reduce(menuLists)}\n        </Menu>\n\n      </div>\n    );\n  }\n}\n// 高阶组件\n// 新的组件向非路由组件传递history、match、location\nexport default withRouter(LeftNav)","import React, { Component } from 'react';\nexport default class  extends Component {\n  state = {  }\n  render() {\n    return (\n      <h1>Home</h1>\n    );\n  }\n}","import React, { Component } from 'react';\nexport default class  extends Component {\n  state = {  }\n  render() {\n    return (\n      <div>category</div>\n    );\n  }\n}","import React, { Component } from 'react';\nexport default class  extends Component {\n  state = {  }\n  render() {\n    return (\n      <div>role</div>\n    );\n  }\n}","import React, { Component } from 'react';\nexport default class  extends Component {\n  state = {  }\n  render() {\n    return (\n      <div>user</div>\n    );\n  }\n}","import React, { Component } from 'react';\nexport default class  extends Component {\n  state = {  }\n  render() {\n    return (\n      <div>product</div>\n    ); \n  }\n}","import React, { Component } from 'react';\nexport default class  extends Component {\n  state = {  }\n  render() {\n    return (\n      <div>line</div>\n    );\n  }\n}","import React, { Component } from 'react';\nexport default class  extends Component {\n  state = {  }\n  render() {\n    return (\n      <div>pie</div>\n    );\n  }\n}","import React, { Component } from 'react';\nexport default class  extends Component {\n  state = {  }\n  render() {\n    return (\n      <div>bar</div>\n    );\n  }\n}","import React, { Component } from 'react';\nimport {Redirect,Switch,Route} from 'react-router-dom'\nimport { Layout } from 'antd';\nimport store from '../../utils/storeUtils'\nimport HeaderSelf from '../../components/header'\nimport LeftNav from '../../components/left-nav'\nimport Home from '../home/home'\nimport Category from '../category/category'\nimport Role from '../role/role'\nimport User from '../user/user'\nimport Product from '../product/product'\nimport Line from '../charts/line'\nimport Pie from '../charts/pie'\nimport Bar from '../charts/bar'\nconst {Footer, Sider, Content } = Layout;\nexport default class Admin extends Component {\n  state = {\n    collapsed: false,\n  };\n  onCollapse = collapsed => {\n    this.setState({ collapsed });\n  };\n  render() {\n    if(!store.user){\n      return  <Redirect to='/login'/>\n    }\n    return (\n      <Layout style={{minHeight: '100vh'}}>\n          <Sider  collapsible collapsed={this.state.collapsed} onCollapse={this.onCollapse}>\n            <LeftNav/>\n          </Sider>\n          <Layout>\n            <HeaderSelf/>\n            <Content style={{margin:'14px',background:'#fff'}}>\n              <Switch>\n                <Route path='/home' component={Home}/>\n                <Route path='/category' component={Category}/>\n                <Route path='/product' component={Product}/>\n                <Route path='/role' component={Role}/>\n                <Route path='/user' component={User}/>\n                <Route path='/charts/bar' component={Bar}/>\n                <Route path='/charts/line' component={Line}/>\n                <Route path='/charts/pie' component={Pie}/>\n                <Redirect to='/home' />\n              </Switch>\n            </Content>\n            <Footer style={{textAlign:'center',margin:'0 14px 0',background:'#fff'}}>Footer</Footer>\n          </Layout>\n      </Layout>\n    );\n  }\n}","/**\n * 应用根组件\n */\nimport React, { Component } from 'react';\nimport {BrowserRouter,Route,Switch} from 'react-router-dom'\nimport Login from './pages/login/login'\nimport Admin from './pages/admin/admin'\nimport store from './utils/storeUtils'\nclass App extends Component {\n  render() {\n    const user= store.get('user_key')\n    store.user=user //每次渲染先取出来放到内存中，各个组件取的时候不用store再去取\n    return (\n     <BrowserRouter>\n      <Switch>{/* switch只匹配一个path */}\n        <Route path={'/login'} component={Login}></Route>\n        <Route path={'/'} component={Admin}></Route>\n      </Switch>\n     </BrowserRouter>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}